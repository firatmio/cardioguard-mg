; =============================================================================
; CardioGuard ESP32 Holter Simulator — PlatformIO Project
; =============================================================================
; ESP32 kartını BLE Holter ECG cihazı olarak simüle eder.
; Mobil uygulama ile tam uyumlu: Aynı UUID'ler, aynı paket formatı.
;
; Kurulum:
;   1. PlatformIO yükle: pip install platformio
;   2. ESP32 kartı bağla
;   3. pio run -t upload
;
; veya Arduino IDE ile:
;   - Board: ESP32 Dev Module
;   - Partition Scheme: Default 4MB
;   - Dosyayı src/main.cpp olarak aç
; =============================================================================

[env:esp32]
platform = espressif32
board = deneyapkart
framework = arduino
monitor_speed = 115200

; DeneyapKart 1A: ESP32-WROVER tabanlı, 8MB PSRAM, 4MB Flash
board_build.partitions = default.csv
board_build.f_cpu = 240000000L

lib_deps =
    ; ESP32 BLE kütüphanesi (framework ile birlikte gelir)

build_flags =
    ; Bluedroid BLE stack kullan (kod <BLEDevice.h> Bluedroid API'si kullanıyor)
    -D CONFIG_BT_ENABLED=1
    -D CONFIG_BTDM_CTRL_MODE_BLE_ONLY=1
    ; PSRAM etkinleştir (DeneyapKart 1A 8MB PSRAM içerir)
    -D BOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    ; BLE servis sayısı için yeterli attribute alanı (3 servis)
    -D CONFIG_BT_GATT_MAX_SR_PROFILES=5
    ; Watchdog timeout artır — BLE init zaman alabilir
    -D CONFIG_ESP_TASK_WDT_TIMEOUT_S=10
